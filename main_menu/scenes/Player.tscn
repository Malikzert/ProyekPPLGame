[gd_scene load_steps=34 format=3 uid="uid://ctfd4fjb2avnw"]

[ext_resource type="Texture2D" uid="uid://cgac7c37hnolj" path="res://assets/gambar/spr_player_idle_strip5.png" id="1_cda3u"]
[ext_resource type="Texture2D" uid="uid://dthjfnxbjs67h" path="res://assets/gambar/spr_player_run_strip9.png" id="2_uad78"]
[ext_resource type="Texture2D" uid="uid://buav7vswhqo7u" path="res://assets/gambar/spr_player_jump_strip12.png" id="3_g05pp"]

[sub_resource type="GDScript" id="GDScript_cda3u"]
resource_name = "player_movement"
script/source = "extends CharacterBody2D

const SPEED = 150.0
const JUMP_VELOCITY = -300.0
const MAX_AIR_JUMP = 1

var air_jumps = 0

func _physics_process(delta: float) -> void:
	if not is_on_floor():
		velocity += get_gravity() * delta
	
	if is_on_floor():
		air_jumps = 0

	# Jump
	if Input.is_action_just_pressed(\"move_up\"):
		if is_on_floor():
			velocity.y = JUMP_VELOCITY
		elif air_jumps < MAX_AIR_JUMP:
			velocity.y = JUMP_VELOCITY
			air_jumps += 1

	# Movement
	var direction := Input.get_axis(\"move_left\", \"move_right\")
	if direction != 0:
		velocity.x = direction * SPEED
		$AnimatedSprite2D.flip_h = direction < 0
	else:
		velocity.x = move_toward(velocity.x, 0, SPEED)

	# ----------------------------
	# ANIMATION SYSTEM
	# ----------------------------
	var sprite = $AnimatedSprite2D

	if not is_on_floor():
		if velocity.y < 0:
			sprite.play(\"jump\")
		else:
			sprite.play(\"fall\")
	elif velocity.x != 0:
		sprite.play(\"run\")
	else:
		sprite.play(\"idle\")

	move_and_slide()
"

[sub_resource type="AtlasTexture" id="AtlasTexture_lcbjc"]
atlas = ExtResource("3_g05pp")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_uad78"]
atlas = ExtResource("1_cda3u")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_g05pp"]
atlas = ExtResource("1_cda3u")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_c82dm"]
atlas = ExtResource("1_cda3u")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_khbu7"]
atlas = ExtResource("1_cda3u")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_6bw0b"]
atlas = ExtResource("1_cda3u")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_bejsx"]
atlas = ExtResource("3_g05pp")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_lvcsj"]
atlas = ExtResource("3_g05pp")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ph453"]
atlas = ExtResource("3_g05pp")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_fycue"]
atlas = ExtResource("3_g05pp")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_61qyd"]
atlas = ExtResource("3_g05pp")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_f12na"]
atlas = ExtResource("3_g05pp")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_4ea2x"]
atlas = ExtResource("3_g05pp")
region = Rect2(384, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_jeo14"]
atlas = ExtResource("3_g05pp")
region = Rect2(448, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_hvfpp"]
atlas = ExtResource("3_g05pp")
region = Rect2(512, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_jcfm6"]
atlas = ExtResource("3_g05pp")
region = Rect2(576, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_3jslo"]
atlas = ExtResource("3_g05pp")
region = Rect2(640, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_lma5f"]
atlas = ExtResource("3_g05pp")
region = Rect2(704, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_j2oup"]
atlas = ExtResource("2_uad78")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_qj0fo"]
atlas = ExtResource("2_uad78")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_lgi1h"]
atlas = ExtResource("2_uad78")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_v2bw1"]
atlas = ExtResource("2_uad78")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_of3s6"]
atlas = ExtResource("2_uad78")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_wnd43"]
atlas = ExtResource("2_uad78")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_vafg7"]
atlas = ExtResource("2_uad78")
region = Rect2(384, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_sopss"]
atlas = ExtResource("2_uad78")
region = Rect2(448, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_q5qqi"]
atlas = ExtResource("2_uad78")
region = Rect2(512, 0, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_lcbjc"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_lcbjc")
}],
"loop": true,
"name": &"fall",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_uad78")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_g05pp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c82dm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_khbu7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6bw0b")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bejsx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lvcsj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ph453")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fycue")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_61qyd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f12na")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4ea2x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jeo14")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hvfpp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jcfm6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3jslo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lma5f")
}],
"loop": true,
"name": &"jump",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_j2oup")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qj0fo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lgi1h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_v2bw1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_of3s6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wnd43")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vafg7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sopss")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q5qqi")
}],
"loop": true,
"name": &"run",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bejsx"]
size = Vector2(14, 43)

[node name="Player" type="CharacterBody2D"]
script = SubResource("GDScript_cda3u")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(1, -2)
sprite_frames = SubResource("SpriteFrames_lcbjc")
animation = &"idle"
autoplay = "idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-3, 6.5)
shape = SubResource("RectangleShape2D_bejsx")
